# Технический Анализ Семейств Моделей Anthropic Claude: Комплексный Отчет по Claude 3 и Claude 4

## **Краткий Обзор**

Настоящий отчет представляет собой исчерпывающий технический анализ семейств моделей Anthropic Claude 3 и Claude 4, основанный на общедоступных данных, включая официальную документацию, технические блоги, бенчмарки и исследовательские статьи. Цель данного документа — предоставить разработчикам, архитекторам решений и исследователям ИИ детальное понимание возможностей и ограничений этих моделей для принятия обоснованных решений при их внедрении.

Анализ выявляет ключевые различия между поколениями. Семейство Claude 3 (Haiku, Sonnet, Opus) установило на рынке четкую иерархию моделей, сбалансированных по критериям скорости, стоимости и интеллекта. Семейство Claude 4 (Sonnet 4, Opus 4) представляет собой значительный шаг вперед, фокусируясь на передовых возможностях в области агентного кодирования и сложного многоэтапного мышления, что делает его мощным инструментом для корпоративных и исследовательских задач.

Несмотря на заявленное контекстное окно в 200,000 токенов, фундаментальная проблема "потери информации в середине" (lost in the middle) сохраняется, что требует от разработчиков применения специальных стратегий промптинга для обеспечения надежности. Экосистема API демонстрирует разительные различия между прямым доступом через Anthropic и облачными платформами, такими как AWS Bedrock и Google Cloud Vertex AI. Последние вводят значительную операционную сложность из-за непрозрачных и зачастую ограничительных квот по умолчанию, что превращает выбор платформы в критически важное архитектурное решение.

В отчете подробно рассматриваются производительность, мультимодальные (vision) возможности и даты среза знаний для каждой модели. На основе анализа сформулированы практические рекомендации по выбору оптимальной модели и категоризированы ключевые ограничения, знание которых необходимо для корректной и эффективной работы с системами на базе Claude.

---

## **I. Введение: Эволюция от Claude 3 к Claude 4**

### **A. Разъяснение Семейств Моделей**

Для точного понимания возможностей и ограничений моделей Anthropic крайне важно различать два последовательных поколения: Claude 3 и Claude 4. Пользовательский запрос объединяет их, однако они представляют собой разные этапы эволюции с различными стратегическими акцентами.

### **Семейство Claude 3**

Запущенное в марте 2024 года, это семейство представило рынку четкую трехступенчатую иерархию, позволяющую пользователям выбирать оптимальный баланс между интеллектом, скоростью и стоимостью для конкретных задач.1

- **Claude 3 Haiku:** Самая быстрая и экономичная модель в семействе. Она позиционируется как решение для задач, требующих практически мгновенного отклика, таких как чаты поддержки в реальном времени, модерация контента и быстрое извлечение данных из неструктурированных текстов.2
- **Claude 3 Sonnet:** Сбалансированная модель, часто называемая "рабочей лошадкой". Она предлагает оптимальное сочетание производительности и интеллекта для корпоративных нагрузок, включая обработку больших объемов данных, прогнозирование продаж и генерацию кода.7
- **Claude 3 Opus:** Наиболее интеллектуальная и мощная модель в семействе Claude 3. Она предназначена для решения чрезвычайно сложных и открытых задач, таких как стратегический анализ, передовые исследования и разработки, а также автоматизация задач через API.7

### **Семейство Claude 4**

Запущенное 22 мая 2025 года, это семейство на момент своего дебюта состояло из двух моделей, знаменуя собой следующее поколение технологий Anthropic. Эти модели позиционируются как "гибридные модели мышления" (hybrid reasoning models) с передовыми агентными возможностями.1

- **Claude 4 Sonnet:** Представляет собой значительное обновление по сравнению с предшественниками, обеспечивая превосходную производительность в кодировании и логических рассуждениях с более точным следованием инструкциям. Модель разработана для сбалансированного сочетания высокой производительности и экономической эффективности в производственных средах.10
- **Claude 4 Opus:** Новый флагман, позиционируемый как ведущая в мире модель для кодирования и выполнения сложных, долгосрочных агентных рабочих процессов, требующих устойчивой и автономной работы.10

### **Отсутствие 'Haiku 4'**

Важно отметить, что на момент первоначального запуска семейства Claude 4 модель "Haiku 4" не была анонсирована. Стратегия Anthropic с выпуском Claude 4 была сосредоточена на верхних сегментах производительности и стоимости, ориентированных на корпоративных клиентов. Это представляет собой заметное изменение по сравнению с запуском Claude 3, который охватывал все три рыночных сегмента. Для выполнения пользовательского запроса в данном отчете используется информация о Claude 3 Haiku, чтобы обеспечить анализ по всему спектру "Haiku, Sonnet, Opus", при этом четко указывая, что Haiku относится к предыдущему поколению моделей.10

### **B. API-идентификаторы и Версионирование**

Для разработчиков критически важно использовать правильные идентификаторы моделей при обращении к API, поскольку они различаются в зависимости от платформы. Использование неверного идентификатора является частой причиной ошибок "модель не найдена". В таблице ниже приведены точные идентификаторы для каждой модели на основных платформах.

**Таблица 1: Идентификаторы моделей Claude 3 и Claude 4 на разных платформах**

| Модель | Идентификатор API Anthropic | Идентификатор модели AWS Bedrock | Идентификатор модели Google Vertex AI | Дата выпуска |
| --- | --- | --- | --- | --- |
| **Claude 4 Opus** | claude-opus-4-20250514 | anthropic.claude-opus-4-20250514-v1:0 | claude-opus-4@20250514 | 22 мая 2025 |
| **Claude 4 Sonnet** | claude-sonnet-4-20250514 | anthropic.claude-sonnet-4-20250514-v1:0 | claude-sonnet-4@20250514 | 22 мая 2025 |
| **Claude 3 Opus** | claude-3-opus-20240229 | anthropic.claude-3-opus-20240229-v1:0 | claude-3-opus@20240229 | 4 марта 2024 |
| **Claude 3 Sonnet** | claude-3-sonnet-20240229 | anthropic.claude-3-sonnet-20240229-v1:0 | claude-3-sonnet@20240229 | 4 марта 2024 |
| **Claude 3 Haiku** | claude-3-haiku-20240307 | anthropic.claude-3-haiku-20240307-v1:0 | claude-3-haiku@20240307 | 4 марта 2024 |

Источники: 4

---

## **II. Контекстное окно и Точность Извлечения Информации (Recall Fidelity)**

### **A. Заявленный и Эффективный Размер Контекста**

Все модели семейств Claude 3 и Claude 4 официально поддерживают максимальный размер контекстного окна в **200,000 токенов**.18 Это значительное контекстное окно является одним из ключевых преимуществ, позволяя моделям обрабатывать в одном запросе целые книги, обширные кодовые базы или длительные истории переписки.5 Для отдельных корпоративных клиентов этот лимит может быть расширен до 1 миллиона токенов, однако это не является стандартным предложением и требует заключения специального соглашения с Anthropic.9

Однако наличие большого контекстного окна не гарантирует его стопроцентно эффективное использование. Существует значительная разница между заявленным "маркетинговым" окном и "инженерным" окном, в пределах которого модель может надежно выполнять сложные логические операции. Успешное прохождение тестов на простое извлечение фактов не всегда транслируется в безупречную производительность на реальных, многогранных задачах.

### **B. Проблема "Потери в Середине" (Lost in the Middle)**

Несмотря на впечатляющий размер контекстного окна, модели Claude, как и другие модели на основе архитектуры Transformer, подвержены проблеме "потери в середине".

- **Фундаментальное исследование:** Основополагающая работа исследователей из Стэнфордского университета "Lost in the Middle" продемонстрировала, что производительность языковых моделей имеет U-образную зависимость от положения релевантной информации в контексте. Точность и способность к извлечению информации максимальны, когда данные находятся в самом начале (эффект первичности) или в самом конце (эффект новизны) контекстного окна, и значительно снижаются, когда информация расположена в середине.25
- **Применимость к Claude:** Эта архитектурная особенность сохраняется и в моделях Claude. Независимые анализы и тесты подтверждают, что даже модели с 200-тысячным окном, такие как Claude 3, подвержены этому эффекту.26 Ярким примером служит исследование, проведенное Human Rights Data Analysis Group, в котором точность Claude 3 Haiku при обработке документа по частям (постранично) составила 0.91, но упала до 0.57 при обработке всего документа целиком в полном контекстном окне. Это прямо указывает на неэффективное использование информации из середины длинного контекста.19
- **Тесты "Иголка в стоге сена" (Needle in a Haystack, NIAH):** Anthropic заявляет о практически идеальной точности извлечения (>99%) для Claude 3 Opus в стандартных тестах NIAH, которые проверяют способность модели найти один конкретный факт ("иголку") в большом объеме текста ("стоге сена").9 Однако важно понимать, что эти тесты измеряют в основном простое извлечение фактов. Более сложные версии бенчмарка NIAH, требующие рассуждений на основе нескольких "иголок", показывают, что производительность моделей все же снижается по мере увеличения длины контекста.29
- **Влияние на Claude 4:** Хотя Claude 4 продвигается с акцентом на улучшенное мышление в длинном контексте ("задачи с длинным горизонтом") 13, модель сохраняет то же 200-тысячное окно и ту же базовую архитектуру Transformer.23 Это означает, что проблема "потери в середине" скорее смягчена, чем полностью решена. Пользовательские отчеты и необходимость применения защитных стратегий промптинга подтверждают, что управление контекстом остается критически важной задачей для разработчиков, использующих Claude 4.24

Маркетинговые и технические описания Claude 4 делают акцент на "устойчивой производительности в длительных задачах" и "задачах с длинным горизонтом".11 Это указывает на стратегический сдвиг Anthropic: вместо решения фундаментальной проблемы с механизмом внимания, компания фокусируется на улучшении способности модели поддерживать когерентность и следовать цели на протяжении многих шагов. Внедрение "файлов памяти" (memory files) в Opus 4 является прямым подтверждением этой стратегии. Это означает, что Anthropic борется с практическими последствиями ограничений контекста с помощью высокоуровневых функций (улучшенное следование инструкциям, внешние инструменты памяти), а не только низкоуровневых архитектурных исправлений. Для разработчика это означает, что Claude 4 может лучше "не терять нить повествования" во время длительной задачи, даже если он все еще может "потерять факт" в середине своего контекста.

### **C. Стратегии для Максимизации Точности Извлечения**

Для смягчения проблемы "потери в середине" и повышения надежности моделей при работе с длинными контекстами разработчикам рекомендуется применять следующие стратегии:

- **Стратегия "Книжных обложек" (Bookend Strategy):** Размещайте самую важную информацию, такую как инструкции, ключевые данные или примеры, в самом начале и/или в самом конце промпта. Это позволяет использовать естественную склонность модели к эффектам первичности и новизны.26
- **Итеративная обработка (Chunking):** Для очень длинных документов разбивка их на более мелкие, семантически связанные части (чанки) и их последовательная обработка могут дать более надежные результаты, чем один массивный промпт. Эффективность этого подхода была продемонстрирована в тестах с Claude 3 Haiku.27
- **Четкое структурирование с помощью XML-тегов:** Используйте XML-теги (например, <instructions>, <document>, <question>) для четкого разграничения различных разделов промпта. Это помогает модели лучше ориентироваться в структуре входных данных, улучшая ее фокус и точность.37

### **Категоризация Ограничений**

- **[Необходимы]:** Максимальный размер контекстного окна (200,000 токенов). Агент должен знать этот жесткий лимит, чтобы избежать сбоев запросов из-за превышения длины входных данных.
- **[Нежелательны]:** Проблема "потери в середине". Включение этой информации в системный промпт контрпродуктивно и может сбить модель с толку. Это ограничение, которое должен учитывать разработчик при проектировании системы (например, через структуру промпта), а не то, о чем должна знать модель во время выполнения.

---

## **III. Экосистема API: Цены, Доступ и Лимиты Пропускной Способности**

Экосистема API для моделей Claude является сложной и сильно зависит от поставщика, что делает выбор платформы критически важным для стабильности и масштабируемости приложения.

### **A. Ценообразование (за 1 млн токенов)**

Стоимость API является одним из трех ключевых факторов (наряду с интеллектом и скоростью), по которым Anthropic позиционирует свои модели. Цены асимметричны: выходные токены значительно дороже входных, что делает экономику приложений сильно зависимой от типа задачи (например, задачи суммирования с большим входом и малым выходом будут дешевле, чем задачи генерации контента с малым входом и большим выходом).

**Таблица 2: Сравнительное ценообразование API за 1 млн токенов (Input/Output)**

| Модель | Стоимость Input ($/1M токенов) | Стоимость Output ($/1M токенов) |
| --- | --- | --- |
| **Claude 4 Opus** | $15.00 | $75.00 |
| **Claude 4 Sonnet** | $3.00 | $15.00 |
| **Claude 3 Opus** | $15.00 | $75.00 |
| **Claude 3 Sonnet** | $3.00 | $15.00 |
| **Claude 3 Haiku** | $0.25 | $1.25 |

Примечание: Цены на модели Claude 4 остались такими же, как и у их аналогов из семейства Claude 3. Цены на платформах AWS Bedrock и Google Cloud Vertex AI в целом соответствуют ценам прямого API Anthropic.

Источники: 3

### **B. Лимиты Пропускной Способности (Rate Limits)**

Лимиты пропускной способности — это область, где различия между провайдерами наиболее выражены. Выбор платформы — это не просто ценовое решение, а фундаментальное архитектурное решение, которое глубоко влияет на масштабируемость и надежность приложения.

- **Прямой API Anthropic:**
- Предлагает прозрачную, многоуровневую систему (Tier 1-4 и пользовательский Enterprise). Переход между уровнями автоматизирован и зависит от совокупной суммы пополнения счета.41
- Лимиты измеряются по трем параметрам: **RPM** (запросы в минуту), **ITPM** (входные токены в минуту) и **OTPM** (выходные токены в минуту).46
- **Tier 1 (начальный уровень):** 50 RPM; ITPM/OTPM для Claude 4 Sonnet и Opus составляют 20,000/8,000 соответственно.46
- **Tier 4 (максимальный стандартный):** 4,000 RPM; ITPM/OTPM значительно выше, например, 200,000/80,000 для Claude 4 Sonnet и Opus.46
- **AWS Bedrock:**
- Официальная документация по конкретным квотам для моделей Anthropic крайне скудна.49 Информация в основном собирается из сообщений сообщества и блогов.
- **Критическое ограничение (Burndown Rate):** Для моделей Claude 4 на Bedrock каждый **1 выходной токен потребляет 5 единиц квоты**, в то время как 1 входной токен потребляет только 1 единицу. Это соотношение 1:5 является основной причиной неожиданного достижения лимитов для задач, связанных с генерацией.53
- **Резервирование квоты по max_tokens:** Bedrock предварительно резервирует квоту на основе параметра max_tokens в начале запроса. Небрежная установка этого параметра (например, на максимальное значение "на всякий случай") может серьезно ограничить параллелизм, временно блокируя большую часть квоты токенов в минуту.53 Это означает, что для высокопроизводительных приложений на Bedrock динамическая настройка
    
    max_tokens под каждую конкретную задачу является не просто "лучшей практикой", а *критически важной техникой оптимизации производительности*.
    
- **Начальные квоты:** Новые учетные записи AWS часто начинают с квот, близких к нулю (например, 1 RPM / 2,000 TPM), и для их увеличения требуется обращение в службу поддержки.54
- **Google Cloud Vertex AI:**
- Система квот еще более непрозрачна. Официальная документация перечисляет общие лимиты сервиса Vertex AI, но не предоставляет конкретных квот по умолчанию для моделей Anthropic.56
- Сообщения пользователей и сообщества постоянно указывают на то, что новые проекты по умолчанию имеют квоту **0 RPM / 0 TPM** для моделей Claude. Они фактически отключены и требуют ручного запроса на увеличение квоты для начала использования.58
- Процесс увеличения квот может быть медленным и может потребовать перехода на платный план поддержки Google Cloud.60

Эта разница в сложности и прозрачности систем ограничения скорости создает форму "привязки к экосистеме". Как только разработчик вкладывает значительное время и усилия в навигацию по непрозрачной системе квот конкретного облачного провайдера, стоимость перехода на другую платформу становится непомерно высокой, даже если базовые цены на модели конкурентоспособны. Таким образом, первоначальные трудности и сложность систем квот облачных провайдеров, хотя и вызывают разочарование у новых пользователей, служат мощным механизмом удержания.

**Таблица 3: Сравнительные API-лимиты на разных платформах (для моделей Sonnet/Opus)**

| Платформа | Уровень/Тип квоты | RPM | ITPM | OTPM | Ключевые особенности |
| --- | --- | --- | --- | --- | --- |
| **Anthropic API** | Tier 1 (начальный) | 50 | 20,000 | 8,000 | Прозрачная, автоматическая система уровней |
| **Anthropic API** | Tier 4 (макс. станд.) | 4,000 | 200,000 | 80,000 |  |
| **AWS Bedrock** | По умолчанию (новый аккаунт) | Часто 1 | Часто ~2,000 | Часто ~2,000 | Требуется ручной запрос на увеличение. |
| **AWS Bedrock** | - | Зависит от квоты | Зависит от квоты | Зависит от квоты | **"Сгорание" квоты 1:5 для output-токенов Claude 4.** |
| **Google Vertex AI** | По умолчанию (новый проект) | 0 | 0 | 0 | **Требуется ручной запрос для включения.** |

Источники: 46

### **Категоризация Ограничений**

- **[Необходимы]:** Все жесткие числовые лимиты (RPM, ITPM, OTPM) для конкретного тарифного плана и платформы пользователя. Агент должен знать их для управления очередью запросов и реализации правильной логики отката/повтора, чтобы избежать ошибок 429.
- **[Нежелательны]:** Сложная логика расчета лимитов (например, коэффициент "сгорания" 1:5 на AWS, многоуровневая система Anthropic). Эта логика должна быть реализована в управляющем коде приложения, а не передаваться в системный промпт модели, так как она не относится к выполняемой задаче и может сбить с толку.

---

## **IV. Производительность: Скорость и Задержка**

Производительность является критическим фактором, определяющим пригодность модели для конкретного приложения, будь то интерактивный чат-бот или система для пакетной обработки документов.

### **A. Скорость Генерации (Токены в секунду, t/s)**

Скорость генерации, или пропускная способность, определяет, как быстро модель может создавать длинные ответы.

- **Claude 3 Haiku:** Самая быстрая модель. Бенчмарки показывают медианную скорость около **135 t/s** на API Anthropic и **103 t/s** на AWS Bedrock.64 Другой источник сообщает о
    
    **127 t/s**.20
    
- **Claude 3 Sonnet:** Модель среднего уровня производительности. Бенчмарки показывают около **61 t/s** как на Anthropic, так и на AWS.8 Отдельный источник указывает на
    
    **72 t/s**.66
    
- **Claude 3 Opus:** Самая медленная модель из семейства Claude 3. Результаты бенчмарков сильно варьируются: от низких **~28.5 t/s** 67 до высоких
    
    **100-120 t/s**.68 Такое расхождение, вероятно, связано с различными методологиями тестирования (например, сложностью промпта, длиной контекста).
    
- **Claude 4 Sonnet:** Скорость генерации оценивается примерно в **55 t/s**.69
- **Claude 4 Opus:** Скорость генерации оценивается примерно в **39 t/s**.69

### **B. Задержка (Time to First Token, TTFT)**

Задержка до получения первого токена определяет, насколько "отзывчивым" ощущается приложение в интерактивных сценариях.

- **Claude 3 Haiku:** Самая низкая задержка. **~0.57 с** на API Anthropic и **~1.01 с** на AWS.64 Другой источник сообщает о
    
    **0.52 с**.20
    
- **Claude 3 Sonnet:** **~0.92 с** на Anthropic и немного лучше — **~0.73 с** на AWS.8
- **Claude 3 Opus:** Самая высокая задержка. **~1.33 с - 1.48 с**.67
- **Claude 4 Sonnet:** TTFT составляет **~1.27 с**.69
- **Claude 4 Opus:** TTFT составляет **~1.82 с**.69

Сравнение данных показывает, что модели Claude 4, как правило, медленнее и имеют более высокую задержку, чем их аналоги из семейства Claude 3. Например, Sonnet 4 (~55 t/s, 1.27 с TTFT) уступает Sonnet 3 (~61-72 t/s, ~0.7-0.9 с TTFT). Это, вероятно, является прямым следствием новой "гибридной архитектуры мышления" в Claude 4, которая, скорее всего, добавляет вычислительные накладные расходы даже в стандартном режиме для достижения более надежных и менее ошибочных рассуждений. Это представляет собой классический инженерный компромисс между качеством и скоростью.

**Таблица 4: Сводка по тестам скорости и задержки**

| Модель | Поставщик | Медианная скорость (t/s) | Медианная задержка (TTFT, с) | Источник |
| --- | --- | --- | --- | --- |
| **Claude 4 Opus** | Keywords AI | 38.9 | 1.82 | 69 |
| **Claude 4 Sonnet** | Keywords AI | 54.8 | 1.27 | 69 |
| **Claude 3 Opus** | Artificial Analysis | 28.5 | 1.48 | 67 |
| **Claude 3 Sonnet** | Artificial Analysis | 61.0 | 0.92 | 8 |
| **Claude 3 Sonnet** | AWS Bedrock | 60.9 | 0.73 | 8 |
| **Claude 3 Haiku** | Artificial Analysis | 135.4 | 0.57 | 64 |
| **Claude 3 Haiku** | AWS Bedrock | 102.5 | 1.01 | 64 |

Источники: 67

Существенные расхождения в сообщаемых показателях скорости (например, четырехкратная разница для Claude 3 Opus между источниками 67 и 68) подчеркивают, что реальная производительность сильно зависит от конкретной рабочей нагрузки (тип задачи, длина промпта, длина вывода) и загрузки сервера во время тестирования. Разработчикам необходимо проводить собственные бенчмарки для своих конкретных сценариев использования.

### **Категоризация Ограничений**

- **[Необходимы]:** Относительная иерархия скорости (Haiku > Sonnet > Opus). Это важное знание для выбора подходящей модели в зависимости от требований к задержке (например, интерактивный чат против офлайн-анализа).
- **[Нежелательны]:** Конкретные числовые значения t/s и TTFT. Эти цифры сильно варьируются и зависят от сценария использования. Включение их в системный промпт может ввести агента в заблуждение и привести к неточным предположениям о времени выполнения.

---

## **V. Мультимодальные Возможности: Анализ Изображений (Vision)**

Модели семейств Claude 3 и Claude 4 обладают мощными мультимодальными возможностями, позволяя им анализировать и интерпретировать визуальную информацию. Подход Claude к обработке изображений фундаментально отличается от специализированных моделей компьютерного зрения (CV). Он, по сути, "переводит" изображение в богатое токенизированное представление, с которым языковая модель может затем рассуждать. Это объясняет как его сильные стороны (семантическое понимание, интерпретация диаграмм, описание сцен), так и слабые (точное обнаружение объектов, задачи на пространственные координаты, подсчет).

### **A. Поддерживаемые Форматы и Ограничения**

- **Форматы:** Все модели Claude с поддержкой зрения (семейства 3 и 4) принимают форматы **JPEG, PNG, GIF и WebP**.37
- **Количество изображений:** До **100 изображений** в одном запросе к API и до **20 изображений** за один ход в веб-интерфейсе claude.ai.37
- **Разрешение:** Изображения с разрешением выше **8000x8000 пикселей** будут отклонены. Если запрос содержит более 20 изображений, лимит разрешения для каждого из них снижается до **2000x2000 пикселей**.37 Для оптимальной производительности и во избежание масштабирования (которое добавляет задержку), рекомендуется, чтобы длинная сторона изображения не превышала 1568 пикселей.37 Очень маленькие изображения (менее 200 пикселей по любой стороне) могут привести к снижению качества работы.37
- **Размер файла:** Жесткий лимит в **5 МБ** на изображение для запросов к API и **10 МБ** на изображение при загрузке на claude.ai.37

### **B. Стоимость Обработки Изображений**

Стоимость обработки изображений зависит от количества токенов, в которые преобразуется изображение, и тарифицируется по ставке для входных токенов соответствующей модели.

- **Приблизительная формула токенизации:** tokens=(width_px×height_px)/750.70
- **Пример стоимости для Claude 3 Sonnet ($3 за 1 млн входных токенов):**
- Изображение 200x200 пикселей (~54 токена) стоит примерно $0.00016.37
- Изображение 1000x1000 пикселей (~1334 токена) стоит примерно $0.004.37
- **Стоимость для Claude 4:** Поскольку цены за токен для Sonnet 4 и Opus 4 идентичны их аналогам из Claude 3, стоимость обработки изображений не изменилась для одного и того же уровня модели (например, Sonnet 3 и Sonnet 4).39

### **C. Известные Ограничения и Рекомендации**

- **Отказ от идентификации людей:** Все модели Claude целенаправленно разработаны так, чтобы отказываться от идентификации конкретных людей на изображениях. Это является ключевой функцией безопасности и конфиденциальности.72
- **Пространственное мышление:** Модели могут испытывать трудности с задачами, требующими точного пространственного мышления, такими как определение времени по аналоговым часам или точное расположение фигур на шахматной доске.72
- **Подсчет объектов:** Модели могут быть неточными при подсчете количества объектов в сложных сценах.72
- **Рекомендации по промптингу:** Для достижения наилучших результатов размещайте изображения *перед* текстовым промптом, который содержит вопросы о них. Это соответствует общему принципу предоставления контекста перед запросом.37

### **Категоризация Ограничений**

- **[Необходимы]:** Поддерживаемые форматы, жесткие лимиты на размер файла, разрешение и количество изображений. Политика отказа от идентификации людей.
- **[Нежелательны]:** Слабые стороны в пространственном мышлении и подсчете объектов. Разработчику крайне важно знать об этом для выбора подходящих сценариев использования, но эту информацию не следует включать в системный промпт, так как это может сбить модель с толку.
- **[Запрещены]:** Любая информация о методах обхода политики безопасности, касающейся идентификации людей (в ходе исследования таких данных не обнаружено).

---

## **VI. Срез Знаний (Knowledge Cutoff)**

Дата среза знаний определяет момент времени, после которого модель не обладает информацией о событиях в мире. Это критически важный параметр для задач, требующих актуальных данных.

### **A. Официальные Даты**

- **Claude 3 Opus & Haiku:** Август 2023 г..7
- **Claude 3.5 Sonnet:** Апрель 2024 г..75
- **Claude 3.5 Haiku:** Июль 2024 г..75
- **Claude 3.7 Sonnet:** Ноябрь 2024 г. (при этом база знаний наиболее надежна по состоянию на конец октября 2024 г.).18
- **Claude 4 Sonnet & Opus:** Март 2025 г..14

При сравнении циклов выпуска моделей наблюдается четкая тенденция: разрыв между датой среза знаний и датой публичного выпуска модели значительно сокращается. Для Claude 3 этот разрыв составлял около 7 месяцев (срез в августе 2023 г., выпуск в марте 2024 г.). Для Claude 4 он сократился всего до ~2 месяцев (срез в марте 2025 г., выпуск в мае 2025 г.). Это свидетельствует о серьезной оптимизации конвейеров сбора данных, обучения и оценки в Anthropic. Для пользователей это означает, что новые модели становятся все более "свежими" с момента выпуска, что снижает, но не устраняет полностью, необходимость в RAG для самых последних событий.

### **B. Последствия для Разработчиков**

Модели не могут предоставлять достоверную информацию о событиях, открытиях или данных, появившихся после их соответствующих дат среза знаний. Для любой задачи, требующей актуальной информации, необходимо использовать внешние инструменты. Это может быть реализовано с помощью подхода Retrieval-Augmented Generation (RAG), предоставляя актуальные данные в контексте, или используя возможности tool-use, такие как функция веб-поиска, которая является отдельно тарифицируемой функцией API.7

### **Категоризация Ограничений**

- **[Необходимы]:** Конкретная дата среза знаний для используемой модели. Это критически важные метаданные, о которых должен знать агент, чтобы избегать генерации устаревшей или фактически неверной информации о недавних событиях и знать, когда следует задействовать внешние инструменты.

---

## **VII. Синтез и Рекомендации для Внедрения**

### **A. Фреймворк для Выбора Модели**

Выбор правильной модели является ключевым фактором успеха проекта. Решение следует принимать на основе многофакторной оценки, учитывающей сложность задачи, требования к скорости и бюджет.

- **Ось 1: Сложность задачи (Интеллект):**
- **Низкая сложность (Высокий объем):** Простые, повторяющиеся задачи, такие как модерация контента, базовое извлечение данных или маршрутизация запросов клиентов. **Рекомендуется: Claude 3 Haiku.**
- **Средняя сложность (Корпоративный стандарт):** Основные бизнес-задачи, такие как написание отчетов, анализ данных, стандартная генерация кода и создание функциональных чат-ботов. **Рекомендуется: Claude 3.5 Sonnet / Claude 4 Sonnet.**
- **Высокая сложность (Передовые задачи):** Научные исследования, сложный многоэтапный стратегический анализ и создание продвинутых, автономных агентных систем. **Рекомендуется: Claude 3 Opus / Claude 4 Opus.**
- **Ось 2: Требования к скорости (Задержка и Пропускная способность):**
- **Взаимодействие в реальном времени:** Приложения, где низкая задержка (TTFT) критически важна, например, живые чаты и автодополнение. **Рекомендуется: Claude 3 Haiku.**
- **Асинхронная обработка:** Задачи, где пользователь может подождать результата, например, генерация отчета или офлайн-анализ документа. Здесь предпочтительнее более высокий интеллект **Sonnet** или **Opus**.
- **Ось 3: Бюджет (Стоимость):**
- **Чувствительность к затратам / Высокий объем:** Приложения, где стоимость одного запроса должна быть минимизирована. **Рекомендуется: Claude 3 Haiku.**
- **Ориентация на ценность / Высокая значимость:** Приложения, где точность и качество вывода имеют первостепенное значение и оправдывают более высокую стоимость. **Рекомендуется: Claude 4 Opus.**

### **B. Сводная Таблица Ограничений для Системного Промпта**

Эта таблица объединяет все выявленные ограничения в действенный список, категоризированный для прямого использования при проектировании надежных систем ИИ-агентов.

- **[Необходимы] (Должны быть известны агенту/системе):**
- Максимальное контекстное окно: 200,000 токенов.
- Максимальное количество выходных токенов (зависит от модели, например, 4096 для Opus 3, 32,000 для Opus 4).
- Лимиты API (RPM/TPM) для текущего тарифного плана и платформы.
- Конкретная дата среза знаний используемой модели.
- Поддерживаемые форматы изображений (JPEG, PNG и т.д.) и их ограничения по размеру/разрешению.
- Четкая политика отказа от идентификации людей на изображениях.
- **[Нежелательны] (Должны обрабатываться разработчиком, а не в промпте модели):**
- Феномен "потери в середине" и U-образная кривая внимания.
- Сложная логика расчета квот на облачных платформах (например, коэффициент "сгорания" 1:5 для выходных токенов на AWS).
- Известные слабые стороны модели в точном пространственном мышлении или подсчете объектов на изображениях.
- Расхождения в публичных бенчмарках скорости.
- **[Запрещены] (Не должны использоваться или предприниматься попытки):**
- (В ходе исследования не было выявлено уязвимостей или методов обхода политик).

### **Источники**

1. Claude (language model) - Wikipedia, дата последнего обращения: июля 5, 2025, [https://en.wikipedia.org/wiki/Claude_(language_model)]
2. Getting Started with Claude 3 and the Claude 3 API - GeeksforGeeks, дата последнего обращения: июля 5, 2025, [https://www.geeksforgeeks.org/blogs/getting-started-with-claude-3-and-the-claude-3-api/]
3. Getting Started with Claude 3 and the Claude 3 API - DataCamp, дата последнего обращения: июля 5, 2025, [https://www.datacamp.com/tutorial/getting-started-with-claude-3-and-the-claude-3-api]
4. Intro to Claude - Anthropic API, дата последнего обращения: июля 5, 2025, [https://docs.anthropic.com/en/docs/intro-to-claude]
5. Anthropic AI Claude 3: The New ChatGPT-4 Competitor - OpenCV, дата последнего обращения: июля 5, 2025, [https://opencv.org/blog/anthropic-claude-3/]
6. Discovering Claude 3: Anthropic's Answer to Advanced AI Communication, дата последнего обращения: июля 5, 2025, [https://www.launchconsulting.com/posts/discovering-claude-3-anthropics-answer-to-advanced-ai-communication]
7. The Claude 3 Model Family: Opus, Sonnet, Haiku - Anthropic, дата последнего обращения: июля 5, 2025, [https://www-cdn.anthropic.com/de8ba9b01c9ab7cbabf5c33b80b7bbc618857627/Model_Card_Claude_3.pdf]
8. Claude 3 Sonnet: API Provider Performance Benchmarking & Price ..., дата последнего обращения: июля 5, 2025, [https://artificialanalysis.ai/models/claude-3-sonnet/providers]
9. Claude 3 | Prompt Engineering Guide, дата последнего обращения: июля 5, 2025, [https://www.promptingguide.ai/models/claude-3]
10. Introducing Claude 4 - Anthropic, дата последнего обращения: июля 5, 2025, [https://www.anthropic.com/news/claude-4]
11. Introducing Claude 4 in Amazon Bedrock, the most powerful models ..., дата последнего обращения: июля 5, 2025, [https://aws.amazon.com/blogs/aws/claude-opus-4-anthropics-most-powerful-model-for-coding-is-now-in-amazon-bedrock/]
12. Claude Sonnet 4 - Anthropic, дата последнего обращения: июля 5, 2025, [https://www.anthropic.com/claude/sonnet]
13. Claude Opus 4 - Anthropic, дата последнего обращения: июля 5, 2025, [https://www.anthropic.com/claude/opus]
14. Models overview - Anthropic API, дата последнего обращения: июля 5, 2025, [https://docs.anthropic.com/en/docs/about-claude/models/overview]
15. Claude Opus 4 – Vertex AI - Google Cloud console, дата последнего обращения: июля 5, 2025, [https://console.cloud.google.com/vertex-ai/publishers/anthropic/model-garden/claude-opus-4?hl=zh-cn]
16. Claude Sonnet 4 – Vertex AI - Google Cloud console, дата последнего обращения: июля 5, 2025, [https://console.cloud.google.com/vertex-ai/publishers/anthropic/model-garden/claude-sonnet-4?authuser=0]
17. Vertex AI API - Anthropic, дата последнего обращения: июля 5, 2025, [https://docs.anthropic.com/en/api/claude-on-vertex-ai]
18. Claude 3.7 Sonnet: Features, Access, Benchmarks & More - DataCamp, дата последнего обращения: июля 5, 2025, [https://www.datacamp.com/blog/claude-3-7-sonnet]
19. draft - Human Rights Data Analysis Group, дата последнего обращения: июля 5, 2025, [https://hrdag.org/tech-notes/LLM2-pt1-main-20241021.html]
20. Small but Mighty: Claude 3 Haiku vs GPT-4o mini - A Comprehensive Comparison of Efficient AI Models | Nexus Flow Innovations, дата последнего обращения: июля 5, 2025, [https://www.nexusflowinnovations.com/blog/small-but-mighty-claude-3-haiku-gpt-4o-mini-efficient-ai-models-comparison]
21. Claude 3 context window is a big deal : r/singularity - Reddit, дата последнего обращения: июля 5, 2025, [https://www.reddit.com/r/singularity/comments/1b6e0id/claude_3_context_window_is_a_big_deal/]
22. Claude 4 Haiku, Sonnet, Opus Release Date & Features: - PromptLayer, дата последнего обращения: июля 5, 2025, [https://blog.promptlayer.com/claude-4/]
23. Claude 4 benchmarks show improvements, but context is still 200K - Bleeping Computer, дата последнего обращения: июля 5, 2025, [https://www.bleepingcomputer.com/news/artificial-intelligence/claude-4-benchmarks-show-improvements-but-context-is-still-200k/]
24. Unmasking Claude 4: Does It Really Fix AI's Biggest Flaws? - Latenode, дата последнего обращения: июля 5, 2025, [https://latenode.com/blog/claude-4-ai-fix]
25. Lost in the Middle: How Language Models Use Long Contexts - Stanford Computer Science, дата последнего обращения: июля 5, 2025, [https://cs.stanford.edu/~nfliu/papers/lost-in-the-middle.arxiv2023.pdf]
26. The Context Window Illusion: Why Your 128K Tokens Aren't Working - Medium, дата последнего обращения: июля 5, 2025, [https://medium.com/@johnmunn/the-context-window-illusion-why-your-128k-tokens-arent-working-d224d8219bae]
27. How does Context Window Size Affect Prompt Performance of LLMs? [Tested], дата последнего обращения: июля 5, 2025, [https://www.allaboutai.com/geo/context-window-size/]
28. Claude 3 | AI Model Suite: Introducing Opus, Sonnet, and Haiku - Encord, дата последнего обращения: июля 5, 2025, [https://encord.com/blog/claude-3-explained/]
29. Reasoning on Multiple Needles In A Haystack - arXiv, дата последнего обращения: июля 5, 2025, [https://arxiv.org/html/2504.04150v1]
30. arXiv:2402.11550v2 [cs.CL] 13 Mar 2024, дата последнего обращения: июля 5, 2025, [http://arxiv.org/pdf/2402.11550]
31. Sequential-NIAH: A Needle-In-A-Haystack Benchmark for Extracting Sequential Needles from Long Contexts - arXiv, дата последнего обращения: июля 5, 2025, [https://arxiv.org/html/2504.04713v2]
32. DENIAHL: In-Context Features Influence LLM Needle-In-A-Haystack Abilities - arXiv, дата последнего обращения: июля 5, 2025, [https://arxiv.org/html/2411.19360v1]
33. Multimodal Needle in a Haystack: Benchmarking Long-Context Capability of Multimodal Large Language Models - arXiv, дата последнего обращения: июля 5, 2025, [https://arxiv.org/html/2406.11230v1]
34. Claude 4: The Next Generation of AI Assistants - OpenCV, дата последнего обращения: июля 5, 2025, [https://opencv.org/blog/claude-4/]
35. Claude 4 and still 200k context size : r/ClaudeAI - Reddit, дата последнего обращения: июля 5, 2025, [https://www.reddit.com/r/ClaudeAI/comments/1ksw3w2/claude_4_and_still_200k_context_size/]
36. Claude 4 Benchmarks - We eating! : r/ClaudeAI - Reddit, дата последнего обращения: июля 5, 2025, [https://www.reddit.com/r/ClaudeAI/comments/1ksvb5q/claude_4_benchmarks_we_eating/]
37. Vision - Anthropic API, дата последнего обращения: июля 5, 2025, [https://docs.anthropic.com/en/docs/build-with-claude/vision]
38. Migrating to Claude 4 - Anthropic API, дата последнего обращения: июля 5, 2025, [https://docs.anthropic.com/en/docs/about-claude/models/migrating-to-claude-4]
39. Pricing - Anthropic, дата последнего обращения: июля 5, 2025, [https://www.anthropic.com/pricing]
40. Anthropic Claude AI: Pricing and Features - Latenode, дата последнего обращения: июля 5, 2025, [https://latenode.com/blog/claude-ai-pricing-and-features]
41. Anthropic Claude API: A Practical Guide - Acorn Labs, дата последнего обращения: июля 5, 2025, [https://www.acorn.io/resources/learning-center/claude-api/]
42. Pricing - Anthropic API, дата последнего обращения: июля 5, 2025, [https://docs.anthropic.com/en/docs/about-claude/pricing]
43. Build Generative AI Applications with Foundation Models – Amazon Bedrock Pricing - AWS, дата последнего обращения: июля 5, 2025, [https://aws.amazon.com/bedrock/pricing/]
44. How Much Does Claude 4 Really Cost? - Apidog, дата последнего обращения: июля 5, 2025, [https://apidog.com/blog/claude-4-pricing/]
45. Claude Opus 4 Pricing Calculator - Compare Sonnet 4 & Opus 4 Costs - LiveChatAI, дата последнего обращения: июля 5, 2025, [https://livechatai.com/claude-opus-4-pricing-calculator]
46. Rate limits - Anthropic API, дата последнего обращения: июля 5, 2025, [https://docs.anthropic.com/en/api/rate-limits]
47. How can I advance my API usage to Tier 2? | Anthropic Help Center, дата последнего обращения: июля 5, 2025, [https://support.anthropic.com/en/articles/10366389-how-can-i-advance-my-api-usage-to-tier-2]
48. Our approach to API rate limits | Anthropic Help Center, дата последнего обращения: июля 5, 2025, [https://support.anthropic.com/en/articles/8243635-our-approach-to-api-rate-limits]
49. Quotas for Amazon Bedrock - AWS Documentation, дата последнего обращения: июля 5, 2025, [https://docs.aws.amazon.com/bedrock/latest/userguide/quotas.html]
50. Anthropic Claude models - Amazon Bedrock - AWS Documentation, дата последнего обращения: июля 5, 2025, [https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters-claude.html]
51. дата последнего обращения: января 1, 1970, [https://docs.aws.amazon.com/bedrock/latest/userguide/model-quotas.html]
52. Amazon Bedrock pricing - AWS Documentation, дата последнего обращения: июля 5, 2025, [https://docs.aws.amazon.com/bedrock/latest/userguide/bedrock-pricing.html]
53. Why Claude 4 API Hits Rate Limits: Token Burndown Explained - Community.aws, дата последнего обращения: июля 5, 2025, [https://community.aws/content/2xVZmCM5E7XXw0yqTEGgXYxRowk/bedrock-claude-4-burndown-rates]
54. New AWS account & Bedrock (Claude 3.5) quota increase - unable to request increases, дата последнего обращения: июля 5, 2025, [https://www.reddit.com/r/aws/comments/1gy2yb5/new_aws_account_bedrock_claude_35_quota_increase/]
55. Claude 4 Sonnet rate limit at zero?? - AWS re:Post, дата последнего обращения: июля 5, 2025, [https://repost.aws/questions/QUo8l_TSmASBKr99KK4iUsgQ/claude-4-sonnet-rate-limit-at-zero]
56. Generative AI on Vertex AI quotas and system limits - Google Cloud, дата последнего обращения: июля 5, 2025, [https://cloud.google.com/vertex-ai/generative-ai/docs/quotas]
57. Vertex AI quotas and limits - Google Cloud, дата последнего обращения: июля 5, 2025, [https://cloud.google.com/vertex-ai/docs/quotas]
58. Encountered 429 error "Quota exceeded for online_prediction_concurrent_requests_per_base_model" when using Claude 3 Haiku - Stack Overflow, дата последнего обращения: июля 5, 2025, [https://stackoverflow.com/questions/78323246/encountered-429-error-quota-exceeded-for-online-prediction-concurrent-requests]
59. Issues using Vertex for Opus 4 : r/RooCode - Reddit, дата последнего обращения: июля 5, 2025, [https://www.reddit.com/r/RooCode/comments/1ktfga9/issues_using_vertex_for_opus_4/]
60. Re: I want to increase the quota in Vertex AI - Google Cloud Community, дата последнего обращения: июля 5, 2025, [https://www.googlecloudcommunity.com/gc/AI-ML/I-want-to-increase-the-quota-in-Vertex-AI/m-p/815597]
61. What limitations or quotas exist in Amazon Bedrock for model usage, request rates, or payload sizes? - Milvus, дата последнего обращения: июля 5, 2025, [https://milvus.io/ai-quick-reference/what-limitations-or-quotas-exist-in-amazon-bedrock-for-model-usage-request-rates-or-payload-sizes]
62. GCloud Vertex API rate limits : r/Bard - Reddit, дата последнего обращения: июля 5, 2025, [https://www.reddit.com/r/Bard/comments/1gebo0j/gcloud_vertex_api_rate_limits/]
63. Re: Claude Haiku API: 429, 'message': 'Quota excee... - Google Cloud Community, дата последнего обращения: июля 5, 2025, [https://www.googlecloudcommunity.com/gc/AI-ML/Claude-Haiku-API-429-message-Quota-exceeded-for-aiplatform/m-p/728620]
64. Claude 3 Haiku: API Provider Performance Benchmarking & Price ..., дата последнего обращения: июля 5, 2025, [https://artificialanalysis.ai/models/claude-3-haiku/providers]
65. Claude 3 Sonnet - Intelligence, Performance & Price Analysis, дата последнего обращения: июля 5, 2025, [https://artificialanalysis.ai/models/claude-3-sonnet]
66. GPT-4o Mini vs. Claude 3.5 Sonnet: A Detailed Comparison for ..., дата последнего обращения: июля 5, 2025, [https://www.helicone.ai/blog/gpt-4o-mini-vs-claude-3.5-sonnet]
67. Claude 3 Opus - Intelligence, Performance & Price Analysis ..., дата последнего обращения: июля 5, 2025, [https://artificialanalysis.ai/models/claude-3-opus]
68. Claude 3 Opus: Pricing, Context Window, Benchmarks, and More - LLM Stats, дата последнего обращения: июля 5, 2025, [https://llm-stats.com/models/claude-3-opus-20240229]
69. Claude Sonnet 4 vs Claude Opus 4: A comprehensive comparison - Keywords AI, дата последнего обращения: июля 5, 2025, [https://www.keywordsai.co/blog/claude-sonnet-4-vs-claude-opus-4-a-comprehensive-comparison]
70. Vision - Anthropic, дата последнего обращения: июля 5, 2025, [https://docs.anthropic.com/en/docs/vision]
71. OpenAI vs Claude Vision price comparison : r/ClaudeAI - Reddit, дата последнего обращения: июля 5, 2025, [https://www.reddit.com/r/ClaudeAI/comments/1c5jbrd/openai_vs_claude_vision_price_comparison/]
72. Claude 3.5 Sonnet – Vertex AI - Google Cloud console, дата последнего обращения: июля 5, 2025, [https://console.cloud.google.com/vertex-ai/publishers/anthropic/model-garden/claude-3-5-sonnet]
73. On Claude 3.5 Sonnet - LessWrong, дата последнего обращения: июля 5, 2025, [https://www.lesswrong.com/posts/wx4RhFzLbiHoShFjR/on-claude-3-5-sonnet]
74. Anthropic's Claude 4 new features - Ultralytics, дата последнего обращения: июля 5, 2025, [https://www.ultralytics.com/blog/anthropics-claude-4-features-whats-new-and-improved]
75. How up-to-date is Claude's training data? | Anthropic Help Center, дата последнего обращения: июля 5, 2025, [https://support.anthropic.com/en/articles/8114494-how-up-to-date-is-claude-s-training-data]
76. The Claude 3 Model Family: Opus, Sonnet, Haiku - Anthropic, дата последнего обращения: июля 5, 2025, [https://www.anthropic.com/claude-3-model-card]
77. Claude Opus 4 & Claude Sonnet 4 - System Card - Anthropic, дата последнего обращения: июля 5, 2025, [https://www.anthropic.com/claude-4-system-card]
78. Highlights from the Claude 4 system prompt - Simon Willison's Weblog, дата последнего обращения: июля 5, 2025, [https://simonwillison.net/2025/May/25/claude-4-system-prompt/]